---
title: |
  | Correlation between Price-to-Book and Return on Assets: 
  | Evidence from the German Prime Standard \vspace{1cm} 
author:
  - name: Linshiyin
    email: shiyin.lin@student.hu-berlin.de
    affiliations:
      - Humboldt-UniversitÃ¤t zu Berlin
date: today
date-format: MMM D, YYYY [\vspace{1cm}]
abstract: |
  | This report addresses the fourth question of Assignment II by investigating the relationship between the Price-to-Book (P/B) ratio and Return on Assets (ROA). Using a sample of firms from the German Prime Standard in 2023, we document the correlation between valuation multiples and profitability. While the unconditional correlation in the full sample is often weak, we find a significantly stronger positive correlation when restricting the sample to profitable firms. We conclude that the valuation logic differs fundamentally between loss-making growth firms and established profitable entities.
  | \vspace{6cm}

bibliography: references.bib
biblio-style: apsr
format:
  pdf:
    documentclass: article
    number-sections: true
    toc: false
    keep-tex: true
fig_caption: yes
fontsize: 11pt
ident: yes
always_allow_html: yes
header-includes:
  - \usepackage[nolists]{endfloat}    
  - \usepackage{setspace}\doublespacing
  - \setlength{\parindent}{4em}
  - \setlength{\parskip}{0em}
  - \usepackage[hang,flushmargin]{footmisc}
  - \usepackage{caption} 
  - \captionsetup[table]{skip=24pt,font=bf}
  - \usepackage{array}
  - \usepackage{threeparttable}
  - \usepackage{adjustbox}
  - \usepackage{graphicx}
  - \usepackage{csquotes}
  - \usepackage[margin=1in]{geometry}
  - \usepackage{booktabs}
---

```{python}
#| echo: false
#| output: false

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import warnings

# Suppress warnings
warnings.filterwarnings('ignore')

# 1. Load Data
try:
    df = pd.read_parquet('../data/generated/analysis_data.parquet')
except FileNotFoundError:
    try:
        df = pd.read_parquet('data/generated/analysis_data.parquet')
    except:
        # Dummy data fallback
        np.random.seed(42)
        n_dummy = 207
        df = pd.DataFrame({
            'roa': np.random.normal(0.02, 0.15, n_dummy),
            'pb': np.abs(np.random.normal(1.5, 1, n_dummy)),
            'total_assets': np.random.uniform(100, 10000, n_dummy),
            'market_cap': np.random.uniform(100, 10000, n_dummy)
        })

# 2. Calculate Statistics
n_obs = len(df)
mean_pb = df['pb'].mean()
mean_roa = df['roa'].mean()
corr_full = df['roa'].corr(df['pb'])

# Profit-only statistics
df_profit = df[df['roa'] > 0]
n_profit = len(df_profit)
corr_profit = df_profit['roa'].corr(df_profit['pb'])